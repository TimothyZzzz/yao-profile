<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yaoçš„æ‰“å·¥æ—¥å†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.5;
            font-weight: 400;
            background-color: #fff5f7;
            color: #222;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* === æš—è‰²æ¨¡å¼æ ·å¼ === */
        body.dark {
            background-color: #1a1a1a;
            color: #eee;
        }

        body.dark .profile-card,
        body.dark .work-display,
        body.dark .salary-clicker,
        body.dark .modal {
            background: #2d2d2d;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        body.dark .btn-secondary {
            background: #3c3c3c;
            color: #ddd;
            border-color: #555;
        }

        body.dark .interactive-text {
            color: #aaa;
        }

        body.dark .subtitle,
        body.dark p {
            color: #ccc;
        }

        body.dark .heart {
            color: #ff477e;
        }

        #root {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            position: relative;
        }
        
        .heart-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        
        .heart {
            position: absolute;
            color: #ff6f91;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            opacity: 0;
            animation-duration: 15s;
            animation-timing-function: ease-in-out;
            animation-iteration-count: infinite;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            z-index: 1;
            position: relative;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .header .subtitle i {
            animation: bounce 2s infinite;
            color: #ff6f91;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .profile-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
            width: 320px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .profile-card:hover {
            transform: translateY(-10px) rotate(1deg);
            box-shadow: 0 12px 25px rgba(0,0,0,0.1);
        }
        
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #ffd1dc;
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .profile-card p {
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .interactive-text {
            margin-top: 15px;
            font-size: 0.9rem;
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .interactive-text:hover {
            color: #000;
            transform: rotate(1deg);
        }
        
        .random-text {
            margin-top: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            min-height: 24px;
            display: inline-block;
            transition: all 0.5s;
        }
        
        .work-display {
            background: white;
            padding: 20px 30px;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
            width: 320px;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .work-display:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.1);
        }
        
        .work-display p {
            font-size: 1.1rem;
            margin-bottom: 0;
        }
        
        .dynamic-work {
            font-size: 1.1rem;
            font-weight: 600;
            min-height: 24px;
            display: inline-block;
            transition: all 0.5s;
            margin-left: 5px;
        }
        
        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            font-family: "Noto Sans SC", sans-serif;
        }
        
        .btn-primary {
            background: #ff6f91;
            color: white;
            box-shadow: 0 4px 8px rgba(255,111,145,0.4);
        }
        
        .btn-primary:hover {
            background: #ff4c7a;
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(255,111,145,0.6);
        }
        
        .btn-secondary {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            color: #666;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .btn-secondary:hover {
            background: #e9ecef;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .salary-clicker {
            width: 100%;
            max-width: 400px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.06);
            padding: 30px;
            text-align: center;
            margin: 30px auto;
        }
        
        .salary-clicker h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #ff6f91;
        }
        
        .salary-clicker .subtitle {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .salary-amount {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ff6f91;
            margin: 20px 0;
            transition: transform 0.3s;
        }
        
        .salary-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .salary-main {
            background: #ff6f91;
            color: white;
        }
        
        .salary-main:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(255,111,145,0.3);
        }
        
        .salary-main:active {
            transform: scale(0.95);
        }
        
        .reset-btn {
            background: #6c757d;
            color: white;
        }
        
        .reset-btn:hover {
            transform: scale(1.05);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        
        .modal {
            background: white;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .modal-header h3 {
            font-size: 1.3rem;
            font-weight: bold;
            color: #222;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .modal-close {
            color: #666;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .modal-close:hover {
            color: #000;
        }
        
        .modal-content {
            font-size: 1.1rem;
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.6;
        }
        
        .highlight {
            font-weight: 600;
            color: #ff6f91;
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .toast.show {
            opacity: 1;
        }

        /* ===== æš—è‰²æ¨¡å¼æŒ‰é’®ï¼ˆå·¦ä¸Šè§’ï¼‰===== */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;   /* åœ¨å·¦ä¸Šè§’ */
            background: #fff;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ff6f91;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.08);
        }

        .theme-toggle.dark-mode-active {
            background: #333;
            color: #ffd1dc;
        }

        /* ===== å³ä¾§æ‚¬æµ®æ—¥å† - ç»ç’ƒæ€æ•ˆæœ ===== */
        .calendar-sidebar {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 280px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* Safari æ”¯æŒ */
            border-radius: 16px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                0 0 15px rgba(255, 111, 145, 0.15) inset;
            padding: 20px;
            font-size: 0.95rem;
            z-index: 10;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 111, 145, 0.3);
            transition: all 0.3s ease;
        }

        .calendar-sidebar:hover {
            transform: translateY(-2px);
            box-shadow:
                0 12px 40px rgba(0, 0, 0, 0.15),
                0 0 20px rgba(255, 111, 145, 0.2) inset;
        }

        .calendar-sidebar h3 {
            margin: 0 0 15px;
            font-size: 1.1rem;
            color: #ff6f91;
        }

        .calendar-body p {
            margin: 8px 0;
            line-height: 1.5;
            color: #222;
        }

        /* æš—è‰²æ¨¡å¼é€‚é… - æ—¥å† */
        body.dark .calendar-sidebar {
            background: rgba(45, 45, 45, 0.7);
            color: #eee;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 15px rgba(255, 111, 145, 0.15) inset;
            border: 1px solid rgba(255, 111, 145, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        body.dark .calendar-body p {
            color: #ccc;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .header .subtitle {
                font-size: 1rem;
            }
            
            .profile-card, .work-display {
                width: 100%;
                max-width: 320px;
            }
            
            .button-container {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 250px;
            }
        }
        
        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0;
            }
            25% {
                transform: translate(5px, -15px) rotate(5deg);
                opacity: 0.3;
            }
            50% {
                transform: translate(-5px, -30px) rotate(-5deg);
                opacity: 0.4;
            }
            75% {
                transform: translate(3px, -45px) rotate(3deg);
                opacity: 0.3;
            }
            100% {
                transform: translate(0, -60px) rotate(0deg);
                opacity: 0;
            }
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
    </style>
</head>
<body>
    <div id="root">
        <!-- æš—è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’®ï¼ˆå·¦ä¸Šè§’ï¼‰ -->
        <button class="theme-toggle" id="themeToggle">
            <i class="fa-solid fa-moon"></i>
        </button>

        <div class="container">
            <!-- å¿ƒå½¢èƒŒæ™¯ -->
            <div class="heart-background" id="heartBackground"></div>
            
            <!-- æ ‡é¢˜åŒºåŸŸ -->
            <div class="header">
                <h1>Hiï¼Œæˆ‘æ˜¯Yao</h1>
                <div class="subtitle">
                    æ¥è‡ª ContentÂ·Model BPO & VidaXL å¾’æ­¥ç¤¾ç¤¾é•¿ & ç”µç«æ¸¸æˆä¸»ç†äºº
                    <i class="fa-solid fa-rocket"></i>
                </div>
            </div>
            
            <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
            <div class="main-content">
                <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
                <div class="profile-card">
                    <div class="avatar">ğŸ˜</div>
                    <p>ç™½å¤©ç®¡ç†å¤–åŒ…ï¼Œæ™šä¸Šç®¡ç†å¾’æ­¥ç¤¾ï¼Œå‘¨æœ«ç®¡ç†ä¸äº†è‡ªå·±çš„ä½œæ¯ã€‚</p>
                    <div class="interactive-text" id="randomTextTrigger">
                        ğŸ‘‰ ç‚¹æˆ‘è·å–ä»Šæ—¥çš„èƒ¡è¨€ä¹±è¯­
                    </div>
                    <div class="random-text" id="randomText"></div>
                </div>
                
                <!-- å·¥ä½œå†…å®¹æ˜¾ç¤º -->
                <div class="work-display">
                    <p>
                        æˆ‘æ­£åœ¨åšï¼š
                        <span class="dynamic-work" id="dynamicWork"></span>
                    </p>
                </div>

                <!-- ä¸‹ç­å€’è®¡æ—¶ -->
                <div class="work-display">
                    <p>
                        â³ ç¦»ä¸‹ç­è¿˜æœ‰ï¼š
                        <span class="dynamic-work" id="countdown">æ­£åœ¨è®¡ç®—...</span>
                    </p>
                </div>
            </div>
            
            <!-- æŒ‰é’®åŒºåŸŸ -->
            <div class="button-container">
                <button class="btn btn-primary" id="emailBtn">ğŸ“§ å‘é€é‚®ä»¶</button>
                <button class="btn btn-secondary" id="locationBtn">ğŸ“ å¿«é€Ÿæ‰¾åˆ°æˆ‘</button>
            </div>
            
            <!-- è–ªèµ„åŠ è–ªå™¨ -->
            <div class="salary-clicker">
                <h2>ğŸ’° è–ªèµ„åŠ è–ªå™¨</h2>
                <p class="subtitle">æ¯æ¬¡ç‚¹å‡» +500 å…ƒ</p>
                <div class="salary-amount" id="salaryAmount">Â¥0</div>
                <div style="display:flex;gap:10px;justify-content:center;margin-top:15px;">
                    <button class="salary-btn salary-main" id="salaryBtn">ç‚¹æˆ‘ +500</button>
                    <button class="salary-btn reset-btn" id="resetBtn">ğŸ” é‡ç½®æ•°æ®</button>
                </div>
            </div>
        </div>

        <!-- ========== å³ä¾§æ‚¬æµ®æ—¥å† - ç»ç’ƒæ€æ•ˆæœ =========== -->
        <div class="calendar-sidebar">
            <div class="calendar-header">
                <h3>ğŸ“… Yao çš„æ‰“å·¥æ—¥å†</h3>
            </div>
            <div class="calendar-body">
                <p><strong>ğŸ“† å½“å‰æ—¶é—´</strong></p>
                <p id="dateDisplay">-</p>
                <p id="lunarDisplay">-</p>
                <hr style="border:0;border-top:1px solid #eee;margin:10px 0;">
                <p>ğŸ’¼ è·å‘å·¥èµ„ï¼š<span id="salaryCountdown">åŠ è½½ä¸­...</span></p>
                <p>ğŸ„ è·å…ƒæ—¦ï¼š<span id="countdownnewYear">-</span></p>
                <p>ğŸ‰ è·æ˜¥èŠ‚ï¼š<span id="countdownspring">-</span></p>
                <p>ğŸŒ¸ è·æ¸…æ˜ï¼š<span id="countdownqingming">-</span></p>
                <p>ğŸ› ï¸ è·åŠ³åŠ¨èŠ‚ï¼š<span id="countdownlabor">-</span></p>
                <p>ğŸ¥¢ è·ç«¯åˆèŠ‚ï¼š<span id="countdowndragonBoat">-</span></p>
                <p>ğŸ‘ è·ä¸­ç§‹èŠ‚ï¼š<span id="countdownmidAutumn">-</span></p>
                <p>ğŸ‡¨ğŸ‡³ è·å›½åº†èŠ‚ï¼š<span id="countdownnational">-</span></p>
            </div>
        </div>
    </div>

    <!-- Toast æç¤º -->
    <div class="toast" id="toast">æ“ä½œæˆåŠŸ</div>

    <script>
        // ===== åˆå§‹è–ªèµ„åŠ è½½ =====
        let salary = parseInt(localStorage.getItem('salary')) || 0;
        let unlockedAchievements = JSON.parse(localStorage.getItem('unlocked_achievements') || '[]');

        // ===== å¿ƒå½¢èƒŒæ™¯ =====
        function createHearts() {
            const heartBackground = document.getElementById('heartBackground');
            const heartCount = 12;
            for (let i = 0; i < heartCount; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'â¤';
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                const scale = 0.3 + Math.random() * 0.7;
                const duration = 8 + Math.random() * 12;
                const delay = Math.random() * 5;
                const opacity = 0.1 + Math.random() * 0.3;
                heart.style.left = `${x}%`;
                heart.style.top = `${y}%`;
                heart.style.fontSize = `${24 * scale}px`;
                heart.style.opacity = opacity;
                heart.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
                heartBackground.appendChild(heart);
            }
        }

        // ===== éšæœºè¯­å½•ç³»ç»Ÿ =====
        function setupRandomText() {
          const trigger = document.getElementById('randomTextTrigger');
          const output = document.getElementById('randomText');
          const messages = [
            "ä½ ä»Šå¤©çœ‹èµ·æ¥åƒæ˜¯åˆšç¡é†’ï¼Œä½†å¾ˆæœ‰é­…åŠ›ã€‚",
            "åˆ«å·äº†ï¼Œå–å£æ°´å§å…„å¼Ÿã€‚",
            "å¦‚æœäººç”Ÿæœ‰æ’¤é”€é”®ï¼Œä½ ç°åœ¨ä¼šæŒ‰å—ï¼Ÿ",
            "ä»Šå¤©é€‚åˆæ‘¸é±¼ï¼ˆå…¶å®æ¯å¤©éƒ½é€‚åˆï¼‰ã€‚",
            "åŠ è½½ä¸­â€¦â€¦åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•ä½ çš„ç”Ÿæ´»ã€‚"
          ];

          function typeWriter(text, el) {
            el.textContent = '';
            let i = 0;
            const timer = setInterval(() => {
              if (i < text.length) {
                el.textContent += text[i];
                i++;
              } else {
                clearInterval(timer);
              }
            }, 30);
          }

          trigger.addEventListener('click', () => {
            const msg = messages[Math.floor(Math.random() * messages.length)];
            const colors = ["#e74c3c", "#2ecc71", "#3498db", "#f1c40f", "#9b59b6"];
            output.style.color = colors[Math.floor(Math.random() * colors.length)];
            typeWriter(msg, output);
          });
        }

        // ===== åŠ¨æ€å·¥ä½œå†…å®¹ =====
        function setupDynamicWork() {
          const tasks = ["æ•´ç†æ¨¡å‹æ–‡ä»¶", "å®¡æ ¸å¤–åŒ…ä½œå“", "ä¼˜åŒ–æ’ä»¶å·¥å…·", "ç»„ç»‡å¾’æ­¥æ´»åŠ¨", "å–å’–å•¡æ€è€ƒäººç”Ÿ", "å†™å¥‡æ€ªçš„å°å·¥å…·"];
          const el = document.getElementById('dynamicWork');
          let idx = 0;
          const update = () => {
            el.style.opacity = 0;
            setTimeout(() => {
              el.textContent = tasks[idx];
              el.style.color = ["#e74c3c", "#2ecc71", "#3498db", "#f1c40f"][Math.floor(Math.random()*4)];
              el.style.opacity = 1;
              idx = (idx + 1) % tasks.length;
            }, 300);
          };
          update();
          setInterval(update, 2500);
        }

        // ===== è·å– ISO å‘¨æ•°ï¼ˆå›½é™…æ ‡å‡†ï¼‰=====
        function getISOWeek(date) {
          const target = new Date(date.valueOf());
          const dayOfWeek = (target.getDay() + 6) % 7; // å‘¨ä¸€ä¸ºç¬¬ä¸€å¤©
          target.setDate(target.getDate() - dayOfWeek + 3);
          const firstThursday = new Date(target.getFullYear(), 0, 4);
          const weekDiff = (target - firstThursday) / (7 * 24 * 60 * 60 * 1000);
          return 1 + Math.round(weekDiff);
        }

        // ===== ä¸‹ç­å€’è®¡æ—¶ï¼ˆ9:00 - 18:00ï¼‰=====
        function setupCountdown() {
          const countdownEl = document.getElementById('countdown');
          
          function updateCountdown() {
            const now = new Date();
            const startOfDay = new Date(now);
            startOfDay.setHours(0, 0, 0, 0);

            const workStart = new Date(startOfDay);
            workStart.setHours(9, 0, 0, 0); // 9:00 ä¸Šç­

            const workEnd = new Date(startOfDay);
            workEnd.setHours(18, 0, 0, 0); // 18:00 ä¸‹ç­

            if (now < workStart) {
              const diff = workStart - now;
              const hours = Math.floor(diff / (1000 * 60 * 60));
              const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
              countdownEl.textContent = `ğŸ˜´ è¿˜æ²¡ä¸Šç­ï¼Œ${hours}h ${minutes}m åå¼€å§‹æ¬ç –`;
            } 
            else if (now >= workStart && now < workEnd) {
              const diff = workEnd - now;
              const hours = Math.floor(diff / (1000 * 60 * 60));
              const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
              const seconds = Math.floor((diff % (1000 * 60)) / 1000);
              countdownEl.textContent = `${hours}h ${minutes}m ${seconds}s`;
            } 
            else {
              countdownEl.textContent = 'ğŸ‰ å¯ä»¥ä¸‹ç­å•¦ï¼å¿«å»å¾’æ­¥å§ï¼';
            }
          }

          updateCountdown();
          setInterval(updateCountdown, 1000);
        }

        // ===== è®¾ç½®æ—¥å†æ˜¾ç¤ºï¼ˆçœŸå®æ—¶é—´ + è‡ªåŠ¨è·¨å¹´ + ç»ç’ƒæ€ï¼‰=====
        function setupCalendar() {
          function updateCalendar() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const dayOfWeek = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][now.getDay()];
            const weekNum = getISOWeek(now);

            // æ˜¾ç¤ºå…¬å†
            document.getElementById('dateDisplay').textContent = `${year} å¹´ ${month} æœˆ ${date} æ—¥ æ˜ŸæœŸ${dayOfWeek}`;
            document.getElementById('lunarDisplay').textContent = `å†œå†${year}å¹´ Â· ç”Ÿè‚–è›‡ Â· ç¬¬${weekNum}å‘¨`;

            // å‘å·¥èµ„å€’è®¡æ—¶ï¼ˆæ¯æœˆ10å·ï¼‰
            let payDate = new Date(year, month - 1, 10);
            if (today > payDate) payDate = new Date(year, month, 10);
            const salaryDiff = Math.ceil((payDate - today) / (1000 * 60 * 60 * 24));
            document.getElementById('salaryCountdown').textContent = 
              salaryDiff === 0 ? 'ä»Šå¤©å‘å·¥èµ„ï¼ğŸ‰' : `${salaryDiff} å¤©`;

            // èŠ‚æ—¥åˆ—è¡¨ï¼ˆç”¨äºæ„é€ æ—¥æœŸï¼‰
            const holidays = [
              { id: 'newYear',     date: new Date(0, 0, 1)   },
              { id: 'spring',      date: new Date(0, 0, 29)  },
              { id: 'qingming',    date: new Date(0, 3, 5)   },
              { id: 'labor',       date: new Date(0, 4, 1)   },
              { id: 'dragonBoat',  date: new Date(0, 4, 31)  },
              { id: 'midAutumn',   date: new Date(0, 9, 6)   },
              { id: 'national',    date: new Date(0, 9, 1)   }
            ];

            // è®¡ç®—æ¯ä¸ªèŠ‚æ—¥è·ç¦»æœ€è¿‘ä¸€æ¬¡
            holidays.forEach(h => {
              let holidayDate = new Date(year, h.date.getMonth(), h.date.getDate());
              if (holidayDate < today) {
                holidayDate = new Date(year + 1, h.date.getMonth(), h.date.getDate());
              }
              const diff = Math.ceil((holidayDate - today) / (1000 * 60 * 60 * 24));
              const elem = document.getElementById(`countdown${h.id}`);
              if (elem) elem.textContent = `${diff} å¤©`;
            });
          }

          updateCalendar();
          setInterval(() => {
            const now = new Date();
            if (now.getSeconds() === 0 && [0, 30].includes(now.getMinutes())) {
              updateCalendar(); // æ¯åŠå°æ—¶åˆ·æ–°
            }
          }, 60000);
        }

        // ===== æˆå°±åˆ—è¡¨ =====
        const achievements = [
          { at: 5000, title: 'ğŸ“ å®ä¹ ç”Ÿè½¬æ­£', content: 'æ­å–œä½ ç†¬è¿‡è¯•ç”¨æœŸï¼\nç°æ­£å¼åŠ å…¥â€œèƒŒé”…é¢„å¤‡é˜Ÿâ€ï¼' },
          { at: 10000, title: 'ğŸš¶â€â™‚ï¸ å¾’æ­¥ç¤¾è§ä¹ é¢†é˜Ÿ', content: 'æ£€æµ‹åˆ°ä½ å‘¨æœ«æ€»åœ¨æˆ·å¤–â€¦\nå·²è‡ªåŠ¨æ™‹å‡ä¸ºå¾’æ­¥ç¤¾è§ä¹ å¹²éƒ¨ã€‚' },
          { at: 15000, title: 'ğŸ’» å‡è£…å¾ˆå¿™ Lv.3', content: 'AI è§‚å¯Ÿåˆ°ä½ é¢‘ç¹åˆ‡å±\næˆäºˆã€è¡¨é¢å‹¤å¥‹ã€‘å¤§å¸ˆç§°å·ã€‚' },
          { at: 20000, title: 'â˜• å’–å•¡å› æˆç˜¾è€…', content: 'æœ¬å‘¨ç¬¬ 8 æ¯å’–å•¡æ‘„å…¥æˆåŠŸï¼\nå»ºè®®æ”¹åä¸ºï¼šBPO èƒ½é‡æ°¸åŠ¨æœºã€‚' },
          { at: 30000, title: 'ğŸ® ç”µç«ç²¾ç¥é¢†è¢–', content: 'è™½ç„¶æ²¡èµ¢å‡ æŠŠï¼Œä½†æ°”åŠ¿åˆ°ä½äº†ã€‚\nå°å·ï¼šå…¬å¸ç”µç«åèª‰ä¸»ç†äººã€‚' },
          { at: 50000, title: 'ğŸ‘‘ æ‘¸é±¼æ•™çˆ¶', content: 'ä½ å·²è¾¾æˆä¼ è¯´çº§å¢ƒç•Œï¼š\nçœ‹èµ·æ¥å¾ˆå¿™ï¼Œå…¶å®å•¥ä¹Ÿæ²¡å¹²ã€‚' }
        ];

        // ===== æ˜¾ç¤ºæˆå°±å¼¹çª—ï¼ˆå¿…é¡»ç¡®è®¤ï¼‰=====
        function showAchievement(title, content) {
          if (document.querySelector('.modal-overlay')) return;
          const modal = document.createElement('div');
          modal.className = 'modal-overlay';
          modal.innerHTML = `
            <div class="modal">
              <h3>${title}</h3>
              <div class="modal-content">${content.replace(/\n/g, '<br>')}</div>
              <div style="text-align:center;margin-top:20px;">
                <button class="btn btn-primary" id="confirmAchievement">ç¡®è®¤å¹¶ç»§ç»­æ¬ç –</button>
              </div>
            </div>
          `;
          document.body.appendChild(modal);
          document.getElementById('confirmAchievement').addEventListener('click', () => {
            document.body.removeChild(modal);
          });
          showToast(`ğŸ† è¾¾æˆæ–°æˆå°±ï¼š${title}`);
        }

        // ===== æ£€æŸ¥æ˜¯å¦è§£é”æˆå°± =====
        function checkAndUnlockAchievement(currentSalary) {
          for (const ach of achievements) {
            if (currentSalary >= ach.at && !unlockedAchievements.includes(ach.at)) {
              showAchievement(ach.title, ach.content);
              unlockedAchievements.push(ach.at);
              localStorage.setItem('unlocked_achievements', JSON.stringify(unlockedAchievements));
              break;
            }
          }
        }

        // ===== è–ªèµ„ç³»ç»Ÿ =====
        function setupSalarySystem() {
          const amountEl = document.getElementById('salaryAmount');
          const addBtn = document.getElementById('salaryBtn');
          const resetBtn = document.getElementById('resetBtn');

          function updateDisplay() {
            amountEl.textContent = new Intl.NumberFormat('zh-CN', {
              style: 'currency',
              currency: 'CNY',
              minimumFractionDigits: 0,
              maximumFractionDigits: 0
            }).format(salary).replace('CNÂ¥', 'Â¥');
          }

          addBtn.addEventListener('click', () => {
            salary += 500;
            localStorage.setItem('salary', salary);
            updateDisplay();
            amountEl.style.transform = 'scale(1.1)';
            setTimeout(() => amountEl.style.transform = 'scale(1)', 300);
            checkAndUnlockAchievement(salary);
          });

          resetBtn.addEventListener('click', () => {
            if (confirm('âš ï¸ ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ•°æ®å—ï¼Ÿ\\n\\n- è–ªèµ„å°†å˜ä¸º Â¥0\\n- æ‰€æœ‰æˆå°±å°†æ¸…ç©º\\næ­¤æ“ä½œä¸å¯æ’¤é”€')) {
              salary = 0;
              localStorage.removeItem('salary');
              localStorage.removeItem('unlocked_achievements');
              unlockedAchievements = [];
              updateDisplay();
              showToast('ğŸ”„ æ•°æ®å·²é‡ç½®ï¼Œé‡æ–°å¼€å§‹æ¬ç –å§ï¼');
            }
          });

          updateDisplay();
        }

        // ===== é‚®ç®± & ä½ç½® =====
        function setupEmail() {
          document.getElementById('emailBtn').addEventListener('click', () => {
            window.location.href = 'mailto:Ma.Yao@habatrading.com';
            showToast('ğŸ“§ æ­£åœ¨æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯...');
          });
        }

        function setupLocationModal() {
          document.getElementById('locationBtn').addEventListener('click', () => {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
              <div class="modal">
                <div class="modal-header">
                  <h3>æˆ‘çš„ä½ç½®</h3>
                  <div class="modal-close"><i class="fa-solid fa-times"></i></div>
                </div>
                <div class="modal-content">
                  <p>ğŸ“ 2æ¥¼</p>
                  <p class="highlight">BPOåŠå…¬å®¤ï¼ˆåŸTurkeyä¼šè®®å®¤ï¼‰</p>
                </div>
                <div style="text-align:center;">
                  <button class="btn btn-primary" id="modalOk">çŸ¥é“äº†</button>
                </div>
              </div>
            `;
            document.body.appendChild(modal);
            const close = () => document.body.removeChild(modal);
            modal.querySelector('.modal-close').addEventListener('click', close);
            modal.querySelector('#modalOk').addEventListener('click', close);
          });
        }

        // ===== æš—è‰²æ¨¡å¼ =====
        function setupThemeToggle() {
          const toggle = document.getElementById('themeToggle');
          const icon = toggle.querySelector('i');
          const isDark = localStorage.getItem('theme') === 'dark';

          if (isDark) {
            document.body.classList.add('dark');
            icon.className = 'fa-solid fa-sun';
            toggle.classList.add('dark-mode-active');
          }

          toggle.addEventListener('click', () => {
            const isNowDark = document.body.classList.toggle('dark');
            if (isNowDark) {
              icon.className = 'fa-solid fa-sun';
              toggle.classList.add('dark-mode-active');
              localStorage.setItem('theme', 'dark');
            } else {
              icon.className = 'fa-solid fa-moon';
              toggle.classList.remove('dark-mode-active');
              localStorage.setItem('theme', 'light');
            }
          });
        }

        // ===== Toast æç¤º =====
        function showToast(message) {
          const toast = document.getElementById('toast');
          toast.textContent = message;
          toast.classList.add('show');
          setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // ===== åˆå§‹åŒ– =====
        document.addEventListener('DOMContentLoaded', () => {
          createHearts();
          setupRandomText();
          setupDynamicWork();
          setupCountdown();
          setupCalendar();
          setupEmail();
          setupLocationModal();
          setupSalarySystem();
          setupThemeToggle();
        });
    </script>
</body>
</html>
